<!DOCTYPE html>
<html lang="english">
<head>
        <meta charset="utf-8" />
        <title>djohn89.com - DJ</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">djohn89.com</a></h1>
                <nav><ul>
                    <li><a href="/presentations-list.html">Presentations</a></li>
                    <li><a href="/science">Publications (old)</a></li>
                    <li><a href="/category/books.html">books</a></li>
                    <li><a href="/category/conferences.html">conferences</a></li>
                    <li><a href="/category/presentations.html">presentations</a></li>
                    <li><a href="/category/programming.html">programming</a></li>
                </ul>
                </nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/book-review-the-definitive-antlr-4-reference.html">Book review - The definitive ANTLR 4 reference </a></h1>
<footer class="post-info">
        <span>Sat 18 February 2023</span>
<span>| tags: <a href="/tag/books.html">books</a></span>
</footer><!-- /.post-info -->
    <h2>Book review - The definitive ANTLR 4 reference </h2>
<p>

<a href="https://www.amazon.com/Definitive-ANTLR-4-Reference/dp/1934356999">The Definitive ANTLR 4 Reference Second Edition</a> by Terence Parr (Pragmatic Bookshelf, Feb 2013). ISBN: <a href="https://isbnsearch.org/isbn/978-1934356999">978-1934356999</a>.
</p>

<p>Summary: Programmers run into parsing problems all the time. Whether it's a data format like JSON, a network protocol like SMTP, a server configuration file for Apache, a PostScript/PDF file, or a simple spreadsheet macro language--ANTLR v4 and this book will demystify the process. ANTLR v4 has been rewritten from scratch to make it easier than ever to build parsers and the language applications built on top. This completely rewritten new edition of the bestselling Definitive ANTLR Reference shows you how to take advantage of these new features.</p>

<p>I had a problem to solve where I needed to take user search strings like "from:2023-01-01 to:2023-01-31 type:large" and turn it into a SQL query with a WHERE clause similar to "SELECT * FROM contoso_products t WHERE 1=1 AND t.startdate >= @P1 AND t.enddate <= @P2 AND t.frobtype IN (@P3)". The number of WHERE clauses was dynamically controlled by the user, so different clauses might not occur at all, or they might occur multiple times (possibly up to 200 parameters). The parameter values were dynamically set by the user, which meant that just dumping the values directly into SQL was unsafe due to injection attacks and/or bugs. Therefore, the input string had to be parsed and carefully translated into valid SQL.</p>

<p>A reasonable question is: why not use an ORM? The problem was that the available ORM would not support dynamic WHERE clauses. Each possible query would have to be compiled by the ORM, which could generate bad query execution plans and/or cause problems with joins. It was possible for multiple tables to be involved in the queries, and exposing that complexity to the user was unlikely to be easy to support.</p>

<p>Fortunately, ANTL 4 made it relatively easy to define a grammar and use the Listener interface to build up the WHERE clause. By starting the SQL WHERE clause with "1=1", it meant that all subsequent clauses could generate SQL of the form " AND foo = @P" or similar variations. The parameter numbers started at 1 and counted up, so setting the values was relatively straightforward, as ANTLR provides the matched text in the context provided to the ParseTreeListener. </p>

<p>My main problem with actually using ANTLR 4 from the book was that the practical differences and limitations were not emphasized or even stated at all. I got more help from this stackoverflow post (<a href="https://stackoverflow.com/a/46267981">How does the ANTLR lexer disambiguate its rules</a>) than from the book chapter about lexers. It would really have helped if the book started out stating that lexer rules must start with a capital letter, and the longest matching lexer rule will be preferred over other rules. </p>

<p>I'm also using ANTLR 4 to automatically parse a golang program, but that's a topic for another day.</p>

<p>Overall rating of the book: 3 out of 5 stars. It was very helpful for understanding how to use Listeners, but it was not helpful with several practical problems.</p>
                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/book-review-never-lost-again.html" rel="bookmark"
                           title="Permalink to Book review - Never Lost Again">Book review - Never Lost Again</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Thu 06 June 2019</span>
<span>| tags: <a href="/tag/books.html">books</a></span>
</footer><!-- /.post-info -->                I read a book about Keyhole, the startup that produced the software that later became Google Earth and Google Maps
                <a class="readmore" href="/book-review-never-lost-again.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/research-triangle-analysts-analytics-forward-2019.html" rel="bookmark"
                           title="Permalink to Research Triangle Analysts Analytics> Forward 2019">Research Triangle Analysts Analytics&gt; Forward 2019</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Sat 09 March 2019</span>
<span>| tags: <a href="/tag/conferences.html">conferences</a></span>
</footer><!-- /.post-info -->                Attending a local conference was great
                <a class="readmore" href="/research-triangle-analysts-analytics-forward-2019.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/migration-to-github-pages.html" rel="bookmark"
                           title="Permalink to Migration to GitHub Pages">Migration to GitHub Pages</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Tue 13 November 2018</span>
<span>| tags: <a href="/tag/migration.html">migration</a></span>
</footer><!-- /.post-info -->                
                <a class="readmore" href="/migration-to-github-pages.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/extending-wonderware-with-rabbitmq.html" rel="bookmark"
                           title="Permalink to Extending Wonderware with RabbitMQ">Extending Wonderware with RabbitMQ</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Mon 14 May 2018</span>
<span>| tags: <a href="/tag/wonderware.html">Wonderware</a></span>
</footer><!-- /.post-info -->                It's possible to use Wonderware for PLC I/O and custom C# applications on the side, if you're willing to use RabbitMQ to communicate between them.
                <a class="readmore" href="/extending-wonderware-with-rabbitmq.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/presentation-using-big-data-from-automotive-assembly-errors.html" rel="bookmark"
                           title="Permalink to Presentation - Using Big Data from Automotive Assembly Errors">Presentation - Using Big Data from Automotive Assembly Errors</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Sat 27 January 2018</span>
<span>| tags: <a href="/tag/big-data.html">big data</a></span>
</footer><!-- /.post-info -->                An analysis of torque data can yield new insights into the causes of operator errors in automobile assembly
                <a class="readmore" href="/presentation-using-big-data-from-automotive-assembly-errors.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/foxcon-toledo-2018-abstracts.html" rel="bookmark"
                           title="Permalink to FoxCon Toledo 2018 Abstracts">FoxCon Toledo 2018 Abstracts</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Fri 26 January 2018</span>
<span>| tags: <a href="/tag/programming.html">programming</a></span>
</footer><!-- /.post-info -->                Abstracts list from the FoxCon Toledo 2018 conference
                <a class="readmore" href="/foxcon-toledo-2018-abstracts.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/foxcon-toledo-2018-schedule.html" rel="bookmark"
                           title="Permalink to FoxCon Toledo 2018 Schedule">FoxCon Toledo 2018 Schedule</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Sun 21 January 2018</span>
<span>| tags: <a href="/tag/programming.html">programming</a></span>
</footer><!-- /.post-info -->                Schedule (as emailed) from the FoxCon Toledo 2018 conference
                <a class="readmore" href="/foxcon-toledo-2018-schedule.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/codemash-2018-reviews.html" rel="bookmark"
                           title="Permalink to Codemash 2018 reviews">Codemash 2018 reviews</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Sat 13 January 2018</span>
<span>| tags: <a href="/tag/222.html">222</a></span>
</footer><!-- /.post-info -->                
                <a class="readmore" href="/codemash-2018-reviews.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/presentations-list.html" rel="bookmark"
                           title="Permalink to Presentations List">Presentations List</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Mon 01 January 2018</span>
<span>| tags: <a href="/tag/216.html">216</a></span>
</footer><!-- /.post-info -->                
                <a class="readmore" href="/presentations-list.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/presentation-building-your-own-collaborative-editing-web-forms-for-free.html" rel="bookmark"
                           title="Permalink to Presentation - Building Your Own Collaborative Editing Web Forms For Free">Presentation - Building Your Own Collaborative Editing Web Forms For Free</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Tue 07 November 2017</span>
<span>| tags: <a href="/tag/211.html">211</a></span>
</footer><!-- /.post-info -->                
                <a class="readmore" href="/presentation-building-your-own-collaborative-editing-web-forms-for-free.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/presentation-idea-using-columnstore-indexes-to-store-and-analyze-billions-of-torques.html" rel="bookmark"
                           title="Permalink to Presentation idea - Using Columnstore Indexes to Store and Analyze Billions of Torques">Presentation idea - Using Columnstore Indexes to Store and Analyze Billions of Torques</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Sat 22 July 2017</span>
<span>| tags: <a href="/tag/208.html">208</a></span>
</footer><!-- /.post-info -->                
                <a class="readmore" href="/presentation-idea-using-columnstore-indexes-to-store-and-analyze-billions-of-torques.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/thoughts-on-project-euler-in-python.html" rel="bookmark"
                           title="Permalink to Thoughts on Project Euler in Python">Thoughts on Project Euler in Python</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Sat 13 May 2017</span>
<span>| tags: <a href="/tag/202.html">202</a></span>
</footer><!-- /.post-info -->                
                <a class="readmore" href="/thoughts-on-project-euler-in-python.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/linear-algebra-review.html" rel="bookmark"
                           title="Permalink to Linear algebra review">Linear algebra review</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Fri 24 February 2017</span>
<span>| tags: <a href="/tag/182.html">182</a></span>
</footer><!-- /.post-info -->                
                <a class="readmore" href="/linear-algebra-review.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/codemash-2017-fri.html" rel="bookmark"
                           title="Permalink to CodeMash 2017 Fri">CodeMash 2017 Fri</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Tue 31 January 2017</span>
<span>| tags: <a href="/tag/176.html">176</a></span>
</footer><!-- /.post-info -->                
                <a class="readmore" href="/codemash-2017-fri.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/foxcon-toledo-2017-presentation-using-machine-learning-to-automatically-predict-and-identify-defects-in-automotive-assembly-processes.html" rel="bookmark"
                           title="Permalink to FoxCon Toledo 2017 Presentation - Using Machine Learning to Automatically Predict and Identify Defects in Automotive Assembly Processes">FoxCon Toledo 2017 Presentation - Using Machine Learning to Automatically Predict and Identify Defects in Automotive Assembly Processes</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Sat 28 January 2017</span>
<span>| tags: <a href="/tag/170.html">170</a></span>
</footer><!-- /.post-info -->                
                <a class="readmore" href="/foxcon-toledo-2017-presentation-using-machine-learning-to-automatically-predict-and-identify-defects-in-automotive-assembly-processes.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/foxcon-toledo-2017-conference-presentation-schedule.html" rel="bookmark"
                           title="Permalink to FoxCon Toledo 2017 Conference Presentation Schedule">FoxCon Toledo 2017 Conference Presentation Schedule</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Sat 28 January 2017</span>
<span>| tags: <a href="/tag/167.html">167</a></span>
</footer><!-- /.post-info -->                
                <a class="readmore" href="/foxcon-toledo-2017-conference-presentation-schedule.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/foxcon-toledo-2017-software-developers-conference-abstracts.html" rel="bookmark"
                           title="Permalink to FoxCon Toledo 2017 Software Developers Conference - Abstracts">FoxCon Toledo 2017  Software Developers Conference - Abstracts</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Sun 22 January 2017</span>
<span>| tags: <a href="/tag/162.html">162</a></span>
</footer><!-- /.post-info -->                
                <a class="readmore" href="/foxcon-toledo-2017-software-developers-conference-abstracts.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/codemash-2017-thu.html" rel="bookmark"
                           title="Permalink to CodeMash 2017 Thu">CodeMash 2017 Thu</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Mon 16 January 2017</span>
<span>| tags: <a href="/tag/158.html">158</a></span>
</footer><!-- /.post-info -->                
                <a class="readmore" href="/codemash-2017-thu.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/codemash-2017-plans.html" rel="bookmark"
                           title="Permalink to CodeMash 2017 Plans">CodeMash 2017 Plans</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Sun 08 January 2017</span>
<span>| tags: <a href="/tag/156.html">156</a></span>
</footer><!-- /.post-info -->                
                <a class="readmore" href="/codemash-2017-plans.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
            </ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 3
        <a href="/author/dj2.html">&raquo;</a>
</p>
            </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="/science">Publications (until 2013)</a></li>
                            <li><a href="/presentations-list.html">Presentation List (since 2013)</a></li>
                        </ul>
                </div><!-- /.blogroll -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
        </footer><!-- /#contentinfo -->

<script async src="https://www.googletagmanager.com/gtag/js?id=G-WJG22RSKKD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WJG22RSKKD');
</script>

</body>
</html>